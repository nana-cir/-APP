<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>è©æ¬ºã‹ã‚‚ï¼Ÿã‹ã‚“ãŸã‚“ãƒã‚§ãƒƒã‚¯</title>
  
  <script>
    if (localStorage.getItem('nana_consent') !== 'true') {
      window.location.href = 'annai.html';
    }
  </script>

  <style>
    :root{
      --bg:#fbf7ef; --card:#ffffff; --ink:#1d2a33; --muted:#51606b;
      --blue:#2b6cb0; --green:#2f855a; --orange:#d97706; --red:#c53030;
      --line:#e7e1d6; --shadow:0 10px 30px rgba(0,0,0,.08); --radius:18px;
    }
    *{box-sizing:border-box}
    body{ margin:0; font-family: sans-serif; background: var(--bg); color:var(--ink); -webkit-tap-highlight-color: transparent; }
    header{ padding:20px 16px; max-width:800px; margin:0 auto; text-align:center; }
    .wrap{ max-width:800px; margin:0 auto; padding:0 16px 40px; }
    .card{ background:var(--card); border:2px solid var(--line); border-radius:var(--radius); box-shadow:var(--shadow); padding:24px; margin-bottom: 20px; }
    h1{ font-size:24px; margin:0; color:var(--blue); }
    h2{ font-size:20px; margin:20px 0 15px; border-left: 6px solid var(--blue); padding-left: 12px; }
    .checklist { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px; margin-bottom: 24px; }
    .item {
      display: flex; align-items: center; justify-content: center; text-align: center;
      padding: 15px 10px; border: 2px solid var(--line); border-radius: 14px;
      background: white; cursor: pointer; min-height: 70px;
    }
    .item input { display: none; }
    .item:has(input:checked) { background: #eef7f2; border-color: var(--green); }
    .itemText { font-size: 17px; font-weight: bold; }
    .audio-notice { background: #fff5eb; border: 2px solid var(--orange); padding: 15px; border-radius: 14px; margin: 20px 0; color: #7a4b00; font-weight: bold; }
    .actions { display: flex; gap: 15px; }
    button { flex: 1; padding: 18px; font-size: 18px; font-weight: 800; border: 0; border-radius: 16px; cursor: pointer; }
    .btn-main { background: var(--green); color: white; }
    .btn-sub { background: #e2e8f0; color: var(--muted); }
    .screen { display: none; }
    .screen.active { display: block; }
    .result-box { padding: 20px; border-radius: 14px; margin-bottom: 20px; text-align: center; border: 3px solid #ddd; }
    .result-box.danger { background: #fff5f5; border-color: var(--red); color: var(--red); }
    .result-box.caution { background: #fffaf0; border-color: var(--orange); color: #7a4b00; }
    .tel-btn { display: block; background: var(--blue); color: white; text-decoration: none; padding: 20px; border-radius: 16px; text-align: center; font-size: 22px; font-weight: 800; margin-top: 20px; }
  </style>
</head>
<body>

<header><h1>ğŸŸ¢ è©æ¬ºã‹ã‚“ãŸã‚“ãƒã‚§ãƒƒã‚¯</h1></header>

<main class="wrap">
  <section id="screen0" class="screen active">
    <div class="card">
      <h2>1. ç›¸æ‰‹ã¯ã ã‚Œï¼Ÿ</h2>
      <div class="checklist">
        <label class="item"><input type="checkbox" data-score="1"><span class="itemText">è­¦å¯Ÿãƒ»æ¤œå¯Ÿ</span></label>
        <label class="item"><input type="checkbox" data-score="1"><span class="itemText">å½¹æ‰€ãƒ»ç¨å‹™ç½²</span></label>
        <label class="item"><input type="checkbox" data-score="1"><span class="itemText">æ¯å­ãƒ»å­«</span></label>
        <label class="item"><input type="checkbox" data-score="1"><span class="itemText">éŠ€è¡Œãƒ»ã‚«ãƒ¼ãƒ‰</span></label>
        <label class="item"><input type="checkbox" data-score="1"><span class="itemText">é€šä¿¡ä¼šç¤¾</span></label>
        <label class="item"><input type="checkbox" data-score="1"><span class="itemText">ãã®ä»–</span></label>
      </div>
      <h2>2. è¨€è‘‰ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</h2>
      <div class="checklist">
        <label class="item"><input type="checkbox" data-score="3"><span class="itemText">ATMãƒ»éŠ€è¡Œã¸</span></label>
        <label class="item"><input type="checkbox" data-score="3"><span class="itemText">ã‚³ãƒ³ãƒ“ãƒ‹</span></label>
        <label class="item"><input type="checkbox" data-score="3"><span class="itemText">ã‚«ãƒ¼ãƒ‰ã‚’é ã‹ã‚‹</span></label>
        <label class="item"><input type="checkbox" data-score="3"><span class="itemText">æš—è¨¼ç•ªå·</span></label>
        <label class="item"><input type="checkbox" data-score="2"><span class="itemText">ä»Šæ—¥ä¸­ãƒ»ã™ã</span></label>
        <label class="item"><input type="checkbox" data-score="2"><span class="itemText">ã ã‚Œã«ã‚‚ç§˜å¯†</span></label>
        <label class="item"><input type="checkbox" data-score="2"><span class="itemText">LINEã¸ç§»å‹•</span></label>
      </div>
      <div class="audio-notice">ğŸ“¢ æ¬¡ã®ç”»é¢ã§éŸ³ãŒå‡ºã¾ã™ã€‚æ³¨æ„ï¼</div>
      <div class="actions">
        <button onclick="doCheck()" class="btn-main">è¨ºæ–­ã™ã‚‹</button>
        <button onclick="doReset()" class="btn-sub">æ¶ˆå»</button>
      </div>
    </div>
  </section>

  <section id="screen1" class="screen">
    <div class="card">
      <div id="resultBox" class="result-box">
        <div id="resultIcon" style="font-size:50px">âš ï¸</div>
        <h2 id="resultTitle" style="border:0">åˆ¤å®šçµæœ</h2>
      </div>
      <div id="resultText"></div>
      <div class="actions" style="margin-top:20px;">
        <button onclick="changeScreen(2)" class="btn-main">æ¬¡ã¸</button>
        <button onclick="changeScreen(0)" class="btn-sub">æˆ»ã‚‹</button>
      </div>
    </div>
  </section>

  <section id="screen2" class="screen">
    <div class="card">
      <h2>ã¾ãšã€ã“ã‚Œã‚’ã—ã¦ãã ã•ã„</h2>
      <ul style="font-size:20px; font-weight:bold;">
        <li>é›»è©±ã‚’ã™ãã«åˆ‡ã‚‹</li>
        <li>ãŠé‡‘ã¯æ‰•ã‚ãªã„</li>
        <li>ã²ã¨ã‚Šã§æ‚©ã¾ãªã„</li>
      </ul>
      <a href="tel:9110" class="tel-btn">ğŸ“ è­¦å¯Ÿç›¸è«‡ ï¼ƒï¼™ï¼‘ï¼‘ï¼</a>
      <button onclick="doReset()" class="btn-sub" style="width:100%; margin-top:30px;">æœ€åˆã«æˆ»ã‚‹</button>
    </div>
  </section>
</main>

<script>
  function changeScreen(n) {
    document.querySelectorAll('.screen').forEach((s, i) => s.classList.toggle('active', i === n));
    window.scrollTo(0, 0);
  }

  function doCheck() {
    let score = 0;
    const checks = document.querySelectorAll('input:checked');
    if (checks.length === 0) {
      alert("ã‚ã¦ã¯ã¾ã‚‹ã‚‚ã®ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚");
      return;
    }
    checks.forEach(c => score += parseInt(c.dataset.score));

    const box = document.getElementById('resultBox');
    const title = document.getElementById('resultTitle');
    const text = document.getElementById('resultText');
    let voice = "";

    if (score >= 3) {
      box.className = "result-box danger";
      document.getElementById('resultIcon').innerText = "ğŸš¨";
      title.innerText = "è©æ¬ºã®å¯èƒ½æ€§ãŒéå¸¸ã«é«˜ã„ï¼";
      text.innerHTML = "ä»Šã™ãé›»è©±ã‚’åˆ‡ã£ã¦ãã ã•ã„ï¼ç›¸æ‰‹ã¯ã‚¦ã‚½ã‚’ã¤ã„ã¦ã„ã¾ã™ã€‚";
      voice = "ã“ã‚Œã¯è©æ¬ºã®å¯èƒ½æ€§ãŒéå¸¸ã«é«˜ã„ã§ã™ã€‚ã™ãã«é›»è©±ã‚’åˆ‡ã£ã¦ãã ã•ã„ã€‚";
    } else {
      box.className = "result-box caution";
      document.getElementById('resultIcon').innerText = "ğŸ’¡";
      title.innerText = "è½ã¡ç€ã„ã¦ç¢ºèªã—ã¾ã—ã‚‡ã†";
      text.innerHTML = "ä¸€åº¦é›»è©±ã‚’åˆ‡ã‚Šã€å…¬å¼ã®ç•ªå·ã«ã‹ã‘ç›´ã—ã¦ãã ã•ã„ã€‚";
      voice = "è½ã¡ç€ã„ã¦ãã ã•ã„ã€‚ä¸€åº¦é›»è©±ã‚’åˆ‡ã£ã¦ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚";
    }
    changeScreen(1);
    doSpeak(voice);
  }

  function doReset() {
    document.querySelectorAll('input').forEach(i => i.checked = false);
    if(window.speechSynthesis) window.speechSynthesis.cancel();
    changeScreen(0);
  }

  function doSpeak(t) {
    if (!window.speechSynthesis) return;
    window.speechSynthesis.cancel();
    const ut = new SpeechSynthesisUtterance(t);
    ut.lang = 'ja-JP';
    ut.rate = 0.8;
    window.speechSynthesis.speak(ut);
  }
</script>
</body>
</html>
